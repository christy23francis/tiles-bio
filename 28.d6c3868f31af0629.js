"use strict";(self.webpackChunktiled=self.webpackChunktiled||[]).push([[28],{28:(ie,_,l)=>{l.r(_),l.d(_,{AuthModule:()=>$});var s=l(6895),g=l(9051),b=l(9004),e=l(4650);let x=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-auth-main"]],decls:1,vars:0,template:function(i,t){1&i&&e._UZ(0,"router-outlet")},dependencies:[g.lC],styles:['@charset "UTF-8";  .sign-in-outer-wrapper{display:flex;flex-direction:row;align-items:center;padding:80px;column-gap:64px;background:#000000;height:100%;overflow-y:auto}  .sign-in-outer-wrapper .sign-in-seperator{height:100%;width:1px;border-left:1px solid rgba(255,255,255,.1)}  .sign-in-outer-wrapper .sign-in-side-wrapper{display:flex;align-items:center;justify-content:center;flex:1 0 calc(50% - 64.5px)}  .sign-in-outer-wrapper .sign-in-logo{display:flex;flex-direction:column;row-gap:16px;justify-content:center;align-items:center;flex:none;max-width:440px;width:100%}  .sign-in-outer-wrapper .sign-in-logo img{width:200px;height:160px}  .sign-in-outer-wrapper .sign-in-logo .header{display:flex;flex-direction:column;color:#f9f9f9;align-items:center}  .sign-in-outer-wrapper .sign-in-logo .header .header-sub{color:#f9f9f966;margin-top:4px;text-align:center;display:flex;flex-direction:row;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:center}  .sign-in-outer-wrapper .sign-in-logo .header .header-sub.mobile-only{display:none}  .sign-in-outer-wrapper .sign-in-logo .header .header-sub .sign-in{color:#f9f9f9cc;font-weight:500;margin-left:4px;cursor:pointer}  .sign-in-outer-wrapper .sign-in-content-wrapper{display:flex;flex-direction:column;row-gap:32px;flex-shrink:0;flex-grow:1;width:100%;box-sizing:content-box;max-width:400px}  .sign-in-outer-wrapper .sign-in-content-wrapper .inputs-container{display:flex;flex-direction:column;row-gap:16px;width:100%}  .sign-in-outer-wrapper .sign-in-content-wrapper .inputs-container .captcha-wrapper{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:8px 8px 8px 12px;column-gap:8px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.06);border-radius:8px}  .sign-in-outer-wrapper .sign-in-content-wrapper .inputs-container .captcha-wrapper .captcha-check-text{color:#f9f9f9cc}  .sign-in-outer-wrapper .sign-in-content-wrapper .inputs-container .captcha-wrapper .captcha-check-text.loading:after{overflow:hidden;display:inline-block;vertical-align:bottom;animation:ellipsis steps(4,end) .9s infinite;content:"\\2026";width:0px}  .sign-in-outer-wrapper .sign-in-content-wrapper .inputs-container .captcha-wrapper .captcha-icon .captcha-loader{width:24px;height:24px;display:grid;place-content:center;position:relative}  .sign-in-outer-wrapper .sign-in-content-wrapper .inputs-container .captcha-container{width:100%}  .sign-in-outer-wrapper .sign-in-content-wrapper .inputs-container .captcha-container iframe{width:100%!important}  .sign-in-outer-wrapper .sign-in-content-wrapper .buttons-wrapper{display:flex;flex-direction:column;padding:0;row-gap:16px;flex:none}  .sign-in-outer-wrapper .sign-in-content-wrapper .sign-up-divider{display:flex;flex-direction:row;align-items:center;font-weight:500;font-size:12px;line-height:17px;color:#fff3;column-gap:8px;margin:8px 0}  .sign-in-outer-wrapper .sign-in-content-wrapper .sign-up-divider .divider-line{flex:1;border-top:1px solid rgba(255,255,255,.1)}  .sign-in-outer-wrapper .sign-in-content-wrapper .content-sub{color:#f9f9f966;margin-top:4px;text-align:left;display:flex;flex-direction:row;flex-shrink:0;flex-wrap:wrap;align-items:flex-start;justify-content:center}@media (max-width: 767.9px){  .sign-in-outer-wrapper{flex:1;flex-direction:column;padding:40px 24px;border:0;box-shadow:none;height:100%;row-gap:40px}  .sign-in-outer-wrapper .sign-in-seperator{display:none}  .sign-in-outer-wrapper .sign-in-side-wrapper{flex:none;width:100%}  .sign-in-outer-wrapper .sign-in-logo{flex-grow:0}  .sign-in-outer-wrapper .sign-in-logo img{width:80px;height:64px}  .sign-in-outer-wrapper .sign-in-logo .header .header-sub.mobile-only{display:flex}  .sign-in-outer-wrapper .sign-in-content-wrapper{padding-left:0;border-left:0}  .sign-in-outer-wrapper .sign-in-content-wrapper .content-sub{text-align:center;display:none}  .sign-in-outer-wrapper .sign-in-content-wrapper .content-divider{display:none}}  .auth-loading{pointer-events:none}@keyframes ellipsis{to{width:1.25em}}']}),n})();var o=l(433),d=l(590),u=l(8330),c=l(131),m=l(1443),f=l(6307),w=l(605);function y(n,a){1&n&&e._UZ(0,"app-loader",20)}function Z(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Reset Password"))}const I=function(n){return{"auth-loading":n}};let C=(()=>{class n{constructor(i,t,r,p){this.dataCarrier=i,this.router=t,this.supabaseService=r,this.toastService=p,this.passwordResetForm=new o.cw({email:new o.NI("",o.kI.compose([o.kI.required,o.kI.email])),password:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(8)]))}),this.loading=!1}ngOnInit(){this.isPasswordVisible=!1,this.passwordIcon="show-password",this.inputType="password",this.setSignInDataObs()}setSignInDataObs(){this.dataCarrier.getSignInData().pipe((0,d.P)()).subscribe(i=>{i&&i.email&&i.isOTPVerified?(this.emailId=i.email,this.passwordResetForm.get("email").setValue(this.emailId),this.dataCarrier.setSignInData(void 0)):this.router.navigate(["auth/sign-in-email"])})}onToggle(){this.isPasswordVisible=!this.isPasswordVisible,this.isPasswordVisible?(this.passwordIcon="hide-password",this.inputType="text"):(this.passwordIcon="show-password",this.inputType="password")}resetPassword(){this.loading=!0,this.supabaseService.resetPassword(this.passwordResetForm.value.password).catch(i=>{this.loading=!1,this.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}})}).then(i=>{this.loading=!1,i&&i.error?this.toastService.addToast({message:i.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}}):this.router.navigate(["editor"])})}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.H),e.Y36(g.F0),e.Y36(c.T),e.Y36(m.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-password-reset"]],decls:25,vars:12,consts:[[1,"sign-in-outer-wrapper",3,"ngClass"],[1,"sign-in-side-wrapper"],[1,"sign-in-logo"],["ngSrc","assets\\images\\logo\\logo-white.png","width","200","height","160","priority",""],[1,"header","h2"],[1,"sign-in-seperator"],[1,"sign-in-content-wrapper",3,"formGroup","ngSubmit"],[1,"inputs-container"],[1,"input-wrapper","hide"],[1,"input-label","text-body"],[1,"input-box","disabled-input"],["type","email","placeholder","johndoe@example.com","formControlName","email","readonly","",1,"text-body"],[1,"input-wrapper"],[1,"input-box","email"],["formControlName","password","placeholder","8 or more characters",1,"text-body","password",3,"type"],[1,"show-icon",3,"svgType","click"],[1,"buttons-wrapper"],["type","submit",1,"primary-button","text-body",3,"disabled"],["class","button-loader",4,"ngIf"],[4,"ngIf"],[1,"button-loader"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4),e._uU(5),e.qZA()()(),e._UZ(6,"div",5),e.TgZ(7,"div",1)(8,"form",6),e.NdJ("ngSubmit",function(){return t.resetPassword()}),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9),e._uU(12),e.qZA(),e.TgZ(13,"div",10),e._UZ(14,"input",11),e.qZA()(),e.TgZ(15,"div",12)(16,"div",9),e._uU(17),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"input",14),e.TgZ(20,"app-svg",15),e.NdJ("click",function(){return t.onToggle()}),e.qZA()()()(),e.TgZ(21,"div",16)(22,"button",17),e.YNc(23,y,1,0,"app-loader",18),e.YNc(24,Z,2,1,"span",19),e.qZA()()()()()),2&i&&(e.Q6J("ngClass",e.VKq(10,I,t.loading)),e.xp6(5),e.hij(" ","Reset Password"," "),e.xp6(3),e.Q6J("formGroup",t.passwordResetForm),e.xp6(4),e.hij(" ","Email"," "),e.xp6(5),e.hij(" ","Password"," "),e.xp6(2),e.Q6J("type",t.inputType),e.xp6(1),e.Q6J("svgType",t.passwordIcon),e.xp6(2),e.Q6J("disabled",t.loading||!t.passwordResetForm.valid),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading))},dependencies:[s.mk,s.O5,o._Y,o.Fj,o.JJ,o.JL,f.H,w.R,o.sg,o.u,s.Zd]}),n})(),S=(()=>{class n{constructor(i,t,r){this.dataCarrier=i,this.router=t,this.supabaseService=r}ngOnInit(){this.setSignInDataObs()}setSignInDataObs(){this.dataCarrier.getSignInData().pipe((0,d.P)()).subscribe(i=>{i&&i.email?(this.emailId=i.email,this.dataCarrier.setSignInData(void 0)):this.router.navigate(["auth/sign-in-email"])})}signInWithGoogle(){this.supabaseService.signUpWithGoogle()}signInWithMail(){this.router.navigate(["auth/sign-in-email"])}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.H),e.Y36(g.F0),e.Y36(c.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign-in-google"]],decls:29,vars:9,consts:[[1,"sign-in-outer-wrapper"],[1,"sign-in-side-wrapper"],[1,"sign-in-logo"],["ngSrc","assets\\images\\logo\\logo-white.png","width","200","height","160","priority",""],[1,"header","h2"],[1,"header-sub","text-body","mobile-only"],[1,"sign-in-seperator"],[1,"sign-in-content-wrapper"],[1,"content-sub","text-body"],[1,"sign-up-divider","content-divider"],[1,"divider-line"],[1,"buttons-wrapper"],[1,"primary-button","text-body",3,"click"],["svgType","google-icon",1,"button-icon"],[1,"secondary-button","text-body",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4),e._uU(5),e.TgZ(6,"div",5)(7,"span"),e._uU(8),e.TgZ(9,"b"),e._uU(10),e.qZA(),e._uU(11),e.qZA()()()()(),e._UZ(12,"div",6),e.TgZ(13,"div",1)(14,"div",7)(15,"div",8)(16,"span"),e._uU(17),e.TgZ(18,"b"),e._uU(19),e.qZA(),e._uU(20),e.qZA()(),e.TgZ(21,"div",9),e._UZ(22,"span",10),e.qZA(),e.TgZ(23,"div",11)(24,"button",12),e.NdJ("click",function(){return t.signInWithGoogle()}),e._UZ(25,"app-svg",13),e._uU(26),e.qZA(),e.TgZ(27,"div",14),e.NdJ("click",function(){return t.signInWithMail()}),e._uU(28),e.qZA()()()()()),2&i&&(e.xp6(5),e.hij(" ","Login Method"," "),e.xp6(3),e.Oqu("The email "),e.xp6(2),e.Oqu(t.emailId),e.xp6(1),e.Oqu(" is associated with an account created with Google sign up. Use your Google account to continue."),e.xp6(6),e.Oqu("The email "),e.xp6(2),e.Oqu(t.emailId),e.xp6(1),e.Oqu(" is associated with an account created with Google sign up. Use your Google account to continue."),e.xp6(6),e.hij(" ","Continue with Google"," "),e.xp6(2),e.hij(" ","Continue with another email instead"," "))},dependencies:[f.H,s.Zd]}),n})();var v=l(5861),T=l(7842);function U(n,a){1&n&&e._UZ(0,"app-svg",30)}function A(n,a){1&n&&e._UZ(0,"app-loader",31)}function k(n,a){if(1&n){const i=e.EpF();e.TgZ(0,"div",32),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.refreshCaptcha())}),e._UZ(1,"app-svg",33),e.TgZ(2,"div",14),e._uU(3),e.qZA()()}2&n&&(e.xp6(3),e.Oqu("Retry"))}function q(n,a){if(1&n){const i=e.EpF();e.TgZ(0,"ngx-turnstile",34),e.NdJ("resolved",function(r){e.CHM(i);const p=e.oxw();return e.KtG(p.sendCaptchaResponse(r))}),e.qZA()}}function J(n,a){1&n&&e._UZ(0,"app-loader",35)}function O(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Sign in"))}const P=function(n){return{"auth-loading":n}},F=function(n){return{loading:n}};let N=(()=>{class n{constructor(i,t,r,p,h,ee){this.router=i,this.supabaseService=t,this.dataCarrier=r,this._renderer2=p,this.toastService=h,this._document=ee,this.isCaptchaActive=!0,this.isCaptchaVerified=!1,this.captchaCheckText="Checking for robots",this.isCaptchaError=!1,this.loading=!1,this.signInForm=new o.cw({email:new o.NI("",o.kI.compose([o.kI.required,o.kI.email])),password:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(8)]))})}ngOnInit(){this.isPasswordVisible=!1,this.passwordIcon="show-password",this.inputType="password",this.timer=setTimeout(()=>{this.isCaptchaError=!0,this.isCaptchaActive=!1,this.isCaptchaVerified=!1,this.captchaCheckText="Verification failed"},4e4),this.setSignInDataObs(),this.setUserDetailsObs()}setSignInDataObs(){this.dataCarrier.getSignInData().pipe((0,d.P)()).subscribe(i=>{i&&i.email?(this.signInForm.get("email").setValue(i.email),this.dataCarrier.setSignInData(void 0)):this.router.navigate(["auth/sign-in-email"])})}setUserDetailsObs(){this.dataCarrier.getUserDetails().pipe((0,d.P)()).subscribe(i=>{i&&i.username&&(this.username=i.username,this.dataCarrier.setUserDetails(void 0))})}sendCaptchaResponse(i){var t=this;return(0,v.Z)(function*(){if(i&&null!=i){clearTimeout(t.timer);const{data:r,error:p}=yield t.supabaseService.checkCaptcha(i);t.isCaptchaVerified=!1,t.isCaptchaError=!1,r&&"success"===r?(t.isCaptchaVerified=!0,t.captchaCheckText="Everything looks good!"):(t.isCaptchaError=!0,t.isCaptchaActive=!1,t.captchaCheckText="Verification failed"),p&&(t.isCaptchaError=!0,t.isCaptchaActive=!1,t.captchaCheckText="Verification failed")}})()}signIn(){this.loading=!0,this.supabaseService.logIn(this.signInForm.value.email,this.signInForm.value.password).catch(i=>{this.loading=!1,this.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}}),this.refreshCaptcha()}).then(i=>{this.loading=!1,i&&i.error?(this.toastService.addToast({message:i.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}}),this.isCaptchaVerified=!1,this.refreshCaptcha()):(localStorage.setItem("userDetails",JSON.stringify({username:this.username,email:this.signInForm.value.email})),this.router.navigate(["editor"]))})}onToggle(){this.isPasswordVisible=!this.isPasswordVisible,this.isPasswordVisible?(this.passwordIcon="hide-password",this.inputType="text"):(this.passwordIcon="show-password",this.inputType="password")}refreshCaptcha(){this.isCaptchaActive=!1,this.isCaptchaError=!1,this.captchaCheckText="Checking for robots",setTimeout(()=>{this.isCaptchaActive=!0},0),this.timer=setTimeout(()=>{this.isCaptchaError=!0,this.isCaptchaActive=!1,this.isCaptchaVerified=!1,this.captchaCheckText="Verification failed"},4e4)}forgotPassword(){this.supabaseService.getResetPasswordOTP(this.signInForm.value.email).catch(i=>{this.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}})}).then(i=>{i&&i.error?this.toastService.addToast({message:i.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}}):(this.dataCarrier.setSignInData({email:this.signInForm.value.email,otpType:"recovery"}),this.router.navigate(["auth/verification"]))})}goToSignInMail(){this.dataCarrier.setSignInData({email:this.signInForm.value.email}),this.router.navigate(["auth/sign-in-email"])}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(g.F0),e.Y36(c.T),e.Y36(u.H),e.Y36(e.Qsj),e.Y36(m.k),e.Y36(s.K0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign-in-password"]],decls:42,vars:23,consts:[[1,"sign-in-outer-wrapper",3,"ngClass"],[1,"sign-in-side-wrapper"],[1,"sign-in-logo"],["ngSrc","assets\\images\\logo\\logo-white.png","width","200","height","160","priority",""],[1,"header","h2"],[1,"sign-in-seperator"],[1,"sign-in-content-wrapper",3,"formGroup","submit"],[1,"inputs-container"],[1,"input-wrapper"],[1,"input-label","text-body"],[1,"input-box","disabled-input"],["type","email","formControlName","email","readonly","",1,"text-body","pr-82"],[1,"input-icon-wrapper","ab",3,"click"],["svgType","edit"],[1,"input-icon-label"],[1,"input-box"],["formControlName","password","placeholder","8 or more characters",1,"text-body","password",3,"type"],[1,"show-icon",3,"svgType","click"],[1,"captcha-wrapper"],[1,"captcha-check-text","text-body",3,"ngClass"],[1,"captcha-icon"],["svgType","success",4,"ngIf"],["class","captcha-loader",4,"ngIf"],["class","input-icon-wrapper",3,"click",4,"ngIf"],["class","captcha-container","siteKey","0x4AAAAAAADKmmWCCZ2gGg1s","theme","dark",3,"resolved",4,"ngIf"],[1,"buttons-wrapper"],["type","submit",1,"primary-button","text-body",3,"disabled"],["class","button-loader",4,"ngIf"],[4,"ngIf"],[1,"secondary-button","text-body",3,"click"],["svgType","success"],[1,"captcha-loader"],[1,"input-icon-wrapper",3,"click"],["svgType","warning"],["siteKey","0x4AAAAAAADKmmWCCZ2gGg1s","theme","dark",1,"captcha-container",3,"resolved"],[1,"button-loader"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4),e._uU(5),e.qZA()()(),e._UZ(6,"div",5),e.TgZ(7,"div",1)(8,"form",6),e.NdJ("submit",function(){return t.signIn()}),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9),e._uU(12),e.qZA(),e.TgZ(13,"div",10),e._UZ(14,"input",11),e.TgZ(15,"div",12),e.NdJ("click",function(){return t.goToSignInMail()}),e._UZ(16,"app-svg",13),e.TgZ(17,"div",14),e._uU(18),e.qZA()()()(),e.TgZ(19,"div",8)(20,"div",9),e._uU(21),e.qZA(),e.TgZ(22,"div",15),e._UZ(23,"input",16),e.TgZ(24,"app-svg",17),e.NdJ("click",function(){return t.onToggle()}),e.qZA()()(),e.TgZ(25,"div",8)(26,"div",9),e._uU(27),e.qZA(),e.TgZ(28,"div",18)(29,"div",19),e._uU(30),e.qZA(),e.TgZ(31,"div",20),e.YNc(32,U,1,0,"app-svg",21),e.YNc(33,A,1,0,"app-loader",22),e.YNc(34,k,4,1,"div",23),e.qZA()()(),e.YNc(35,q,1,0,"ngx-turnstile",24),e.qZA(),e.TgZ(36,"div",25)(37,"button",26),e.YNc(38,J,1,0,"app-loader",27),e.YNc(39,O,2,1,"span",28),e.qZA(),e.TgZ(40,"div",29),e.NdJ("click",function(){return t.forgotPassword()}),e._uU(41),e.qZA()()()()()),2&i&&(e.Q6J("ngClass",e.VKq(19,P,t.loading)),e.xp6(5),e.Oqu("Sign in with email"),e.xp6(3),e.Q6J("formGroup",t.signInForm),e.xp6(4),e.hij(" ","Email"," "),e.xp6(6),e.Oqu("Edit"),e.xp6(3),e.hij(" ","Password"," "),e.xp6(2),e.Q6J("type",t.inputType),e.xp6(1),e.Q6J("svgType",t.passwordIcon),e.xp6(3),e.hij(" ","Robot check"," "),e.xp6(2),e.Q6J("ngClass",e.VKq(21,F,t.isCaptchaActive&&!t.isCaptchaVerified)),e.xp6(1),e.Oqu(t.captchaCheckText),e.xp6(2),e.Q6J("ngIf",t.isCaptchaVerified),e.xp6(1),e.Q6J("ngIf",t.isCaptchaActive&&!t.isCaptchaVerified),e.xp6(1),e.Q6J("ngIf",t.isCaptchaError),e.xp6(1),e.Q6J("ngIf",t.isCaptchaActive),e.xp6(2),e.Q6J("disabled",!t.signInForm.valid||!t.isCaptchaVerified||t.loading),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading),e.xp6(2),e.hij(" ","Forgot Password"," "))},dependencies:[s.mk,s.O5,o._Y,o.Fj,o.JJ,o.JL,f.H,w.R,o.sg,o.u,T.os,s.Zd]}),n})();function V(n,a){1&n&&e._UZ(0,"app-loader",15)}function Y(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Continue"))}const E=function(n){return{"auth-loading":n}};let Q=(()=>{class n{constructor(i,t,r,p){this.router=i,this.supabaseService=t,this.dataCarrier=r,this.toastService=p,this.isValidEmailId=!1,this.signInForm=new o.cw({email:new o.NI("",o.kI.compose([o.kI.required,o.kI.email]))}),this.loading=!1}ngOnInit(){this.setSignInDataObs()}setSignInDataObs(){this.dataCarrier.getSignInData().pipe((0,d.P)()).subscribe(i=>{i&&i.email&&(this.signInForm.get("email").setValue(i.email),this.dataCarrier.setSignInData(void 0))})}onContinue(){var i=this;return(0,v.Z)(function*(){i.loading=!0,i.signInForm.valid&&(i.isValidEmailId=!0,i.supabaseService.getMailDetails(i.signInForm.value.email).catch(t=>{i.loading=!1,i.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}})}).then(t=>{i.loading=!1,i.setNextRoute(t)}))})()}setNextRoute(i){let t=!1,r=!0;if(i&&i.error)this.toastService.addToast({message:i.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}});else if(i&&i.length>0){t=!0;const p=i[0].provider;p&&"email"!==p&&(r=!1),this.dataCarrier.setUserDetails(i[0])}this.dataCarrier.setSignInData({email:this.signInForm.value.email}),this.router.navigate(t&&r?["auth/sign-in-password"]:t&&!r?["auth/sign-in-google"]:["auth/sign-up"])}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(g.F0),e.Y36(c.T),e.Y36(u.H),e.Y36(m.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign-in-with-email"]],decls:18,vars:9,consts:[[1,"sign-in-outer-wrapper",3,"ngClass"],[1,"sign-in-side-wrapper"],[1,"sign-in-logo"],["ngSrc","assets\\images\\logo\\logo-white.png","width","200","height","160","priority",""],[1,"header","h2"],[1,"sign-in-seperator"],[1,"sign-in-content-wrapper",3,"formGroup","ngSubmit"],[1,"input-wrapper"],[1,"input-label","text-body"],[1,"input-box","email"],["type","email","placeholder","johndoe@example.com","formControlName","email",1,"text-body"],["type","password","hidden","",1,"text-body","password"],["type","submit",1,"primary-button","text-body",3,"disabled"],["class","button-loader",4,"ngIf"],[4,"ngIf"],[1,"button-loader"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4),e._uU(5),e.qZA()()(),e._UZ(6,"div",5),e.TgZ(7,"div",1)(8,"form",6),e.NdJ("ngSubmit",function(){return t.onContinue()}),e.TgZ(9,"div",7)(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"input",10),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"button",12),e.YNc(16,V,1,0,"app-loader",13),e.YNc(17,Y,2,1,"span",14),e.qZA()()()()),2&i&&(e.Q6J("ngClass",e.VKq(7,E,t.loading)),e.xp6(5),e.Oqu("Sign in with email"),e.xp6(3),e.Q6J("formGroup",t.signInForm),e.xp6(3),e.hij(" ","Email"," "),e.xp6(4),e.Q6J("disabled",!t.signInForm.valid||t.loading),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading))},dependencies:[s.mk,s.O5,o._Y,o.Fj,o.JJ,o.JL,w.R,o.sg,o.u,s.Zd]}),n})();function G(n,a){1&n&&e._UZ(0,"app-loader",20)}function D(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Verify OTP"))}const R=function(n){return{"auth-loading":n}};function W(n,a){1&n&&e._UZ(0,"app-loader",30)}function H(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Sign up with email"))}const K=function(n){return{"auth-loading":n}},L=[{path:"",component:x,children:[{path:"",redirectTo:"sign-in",pathMatch:"full"},{path:"sign-in",component:(()=>{class n{constructor(i,t){this.supabaseService=i,this.router=t}ngOnInit(){}logIn(){this.supabaseService.logIn(this.email,this.password).finally(()=>this.router.navigate(["editor"]))}signInWithGoogle(){this.supabaseService.signUpWithGoogle()}signInWithMail(){this.router.navigate(["auth/sign-in-email"])}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(c.T),e.Y36(g.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:10,vars:2,consts:[[1,"sign-in-outer-container"],[1,"sign-in-wrapper"],[1,"sign-in-logo"],["ngSrc","assets\\images\\logo\\logo-white.png","width","200","height","160","priority",""],[1,"sign-in-buttons-wrapper"],[1,"primary-button","text-body",3,"click"],["svgType","google-icon",1,"button-icon"],[1,"secondary-button","text-body",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"button",5),e.NdJ("click",function(){return t.signInWithGoogle()}),e._UZ(6,"app-svg",6),e._uU(7),e.qZA(),e.TgZ(8,"div",7),e.NdJ("click",function(){return t.signInWithMail()}),e._uU(9),e.qZA()()()()),2&i&&(e.xp6(7),e.hij(" ","Continue with Google"," "),e.xp6(2),e.hij(" ","Continue with email instead"," "))},dependencies:[f.H,s.Zd],styles:[".sign-in-outer-container{display:flex;justify-content:center;align-items:center;background:#000000;height:100%;width:100%;overflow:hidden;padding:0}  .sign-in-outer-container .sign-in-wrapper{display:flex;flex-direction:column;align-items:center;padding:80px;row-gap:64px;background:#000000;border-radius:40px}  .sign-in-outer-container .sign-in-wrapper .sign-in-logo img{width:200px;height:160px}  .sign-in-outer-container .sign-in-wrapper .sign-in-buttons-wrapper{display:flex;flex-direction:column;align-items:center;padding:0;row-gap:16px;flex:none}@media (max-width: 767.9px){  .sign-in-outer-container .sign-in-wrapper{flex:1;padding:80px 24px;border:0;box-shadow:none;height:100%;width:100%}  .sign-in-outer-container .sign-in-wrapper .sign-in-logo{flex:1;display:grid;place-content:center}  .sign-in-outer-container .sign-in-wrapper .sign-in-buttons-wrapper{width:100%}}"]}),n})(),title:"Sign in - Tiles"},{path:"sign-in-email",component:Q,title:"Sign in with email - Tiles"},{path:"sign-in-password",component:N,title:"Sign in with email - Tiles"},{path:"verification",component:(()=>{class n{constructor(i,t,r,p){this.dataCarrier=i,this.router=t,this.supabaseService=r,this.toastService=p,this.otpType="signup",this.otpForm=new o.cw({OTP:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(6)]))}),this.loading=!1}ngOnInit(){this.setSignInDataObs()}setSignInDataObs(){this.dataCarrier.getSignInData().pipe((0,d.P)()).subscribe(i=>{i&&i.email?(this.emailId=i.email,this.otpType=i.otpType?i.otpType:this.otpType,this.dataCarrier.setSignInData(void 0)):this.router.navigate(["auth/sign-in-email"])})}verifyOTP(){const i=this.otpForm.value.OTP.toString().padStart(6,"0");this.loading=!0,this.supabaseService.verifyOTP(this.emailId,i,this.otpType).catch(t=>{this.loading=!1,this.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}})}).then(t=>{this.loading=!1,t&&t.error?this.toastService.addToast({message:t.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}}):"recovery"===this.otpType?(this.dataCarrier.setSignInData({email:this.emailId,isOTPVerified:!0}),this.router.navigate(["auth/password-reset"])):this.router.navigate(["editor"])})}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.H),e.Y36(g.F0),e.Y36(c.T),e.Y36(m.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-otp-verification"]],decls:33,vars:15,consts:[[1,"sign-in-outer-wrapper",3,"ngClass"],[1,"sign-in-side-wrapper"],[1,"sign-in-logo"],["ngSrc","assets\\images\\logo\\logo-white.png","width","200","height","160","priority",""],[1,"header","h2"],[1,"header-sub","text-body","mobile-only"],[1,"sign-in-seperator"],[1,"sign-in-content-wrapper",3,"formGroup","submit"],[1,"content-sub","text-body"],[1,"sign-up-divider","content-divider"],[1,"divider-line"],[1,"inputs-container"],[1,"input-wrapper"],[1,"input-label","text-body"],[1,"input-box"],["type","number","placeholder","OTP from mail","formControlName","OTP",1,"text-body"],[1,"buttons-wrapper"],["type","submit",1,"primary-button","text-body",3,"disabled"],["class","button-loader",4,"ngIf"],[4,"ngIf"],[1,"button-loader"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4),e._uU(5),e.TgZ(6,"div",5)(7,"span"),e._uU(8),e.TgZ(9,"b"),e._uU(10),e.qZA(),e._uU(11),e.qZA()()()()(),e._UZ(12,"div",6),e.TgZ(13,"div",1)(14,"form",7),e.NdJ("submit",function(){return t.verifyOTP()}),e.TgZ(15,"div",8)(16,"span"),e._uU(17),e.TgZ(18,"b"),e._uU(19),e.qZA(),e._uU(20),e.qZA()(),e.TgZ(21,"div",9),e._UZ(22,"span",10),e.qZA(),e.TgZ(23,"div",11)(24,"div",12)(25,"div",13),e._uU(26),e.qZA(),e.TgZ(27,"div",14),e._UZ(28,"input",15),e.qZA()()(),e.TgZ(29,"div",16)(30,"button",17),e.YNc(31,G,1,0,"app-loader",18),e.YNc(32,D,2,1,"span",19),e.qZA()()()()()),2&i&&(e.Q6J("ngClass",e.VKq(13,R,t.loading)),e.xp6(5),e.hij(" ","Verification"," "),e.xp6(3),e.Oqu("We have sent an OTP to "),e.xp6(2),e.Oqu(t.emailId),e.xp6(1),e.Oqu(". Be sure to check your spam folder too."),e.xp6(3),e.Q6J("formGroup",t.otpForm),e.xp6(3),e.Oqu("We have sent an OTP to "),e.xp6(2),e.Oqu(t.emailId),e.xp6(1),e.Oqu(". Be sure to check your spam folder too."),e.xp6(6),e.hij(" ","One Time Password"," "),e.xp6(4),e.Q6J("disabled",t.loading||!t.otpForm.valid),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading))},dependencies:[s.mk,s.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,w.R,o.sg,o.u,s.Zd]}),n})(),title:"Verify OTP - Tiles"},{path:"sign-up",component:(()=>{class n{constructor(i,t,r,p){this.router=i,this.supabaseService=t,this.dataCarrier=r,this.toastService=p,this.signUpForm=new o.cw({fullName:new o.NI("",o.kI.compose([o.kI.required])),email:new o.NI("",o.kI.compose([o.kI.required,o.kI.email])),password:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(8)]))}),this.loading=!1}ngOnInit(){this.isPasswordVisible=!1,this.passwordIcon="show-password",this.inputType="password",this.setSignInDataObs()}setSignInDataObs(){this.dataCarrier.getSignInData().pipe((0,d.P)()).subscribe(i=>{i&&i.email?(this.signUpForm.get("email").setValue(i.email),this.dataCarrier.setSignInData(void 0)):this.router.navigate(["auth/sign-in-email"])})}onToggle(){this.isPasswordVisible=!this.isPasswordVisible,this.isPasswordVisible?(this.passwordIcon="hide-password",this.inputType="text"):(this.passwordIcon="show-password",this.inputType="password")}signUp(){var i=this;return(0,v.Z)(function*(){if(i.signUpForm.valid){i.loading=!0;const t=i.signUpForm.value.email;i.supabaseService.signUp(t,i.signUpForm.value.password,i.signUpForm.value.fullName).catch(h=>{i.loading=!1,i.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}})}).then(h=>{i.loading=!1,h&&h.error?i.toastService.addToast({message:h.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}}):(i.dataCarrier.setSignInData({email:t}),i.router.navigate(["auth/verification"]))})}})()}signUpWithGoogle(){this.supabaseService.signUpWithGoogle()}goToSignInMail(){this.dataCarrier.setSignInData({email:this.signUpForm.value.email}),this.router.navigate(["auth/sign-in-email"])}goToSignIn(){this.router.navigate(["auth/sign-in"])}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(g.F0),e.Y36(c.T),e.Y36(u.H),e.Y36(m.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign-up"]],decls:47,vars:18,consts:[[1,"sign-in-outer-wrapper",3,"ngClass"],[1,"sign-in-side-wrapper"],[1,"sign-in-logo"],["ngSrc","assets\\images\\logo\\logo-white.png","width","200","height","160","priority",""],[1,"header","h2"],[1,"header-sub","text-body"],[1,"sign-in",3,"click"],[1,"sign-in-seperator"],[1,"sign-in-content-wrapper",3,"formGroup","ngSubmit"],[1,"primary-button","text-body",3,"click"],["svgType","google-icon",1,"button-icon"],[1,"sign-up-divider"],[1,"divider-line"],[1,"divider-text"],[1,"inputs-container"],[1,"input-wrapper"],[1,"input-label","text-body"],[1,"input-box"],["type","text","placeholder","Your full name","formControlName","fullName",1,"text-body"],[1,"input-box","disabled-input"],["type","email","placeholder","johndoe@example.com","formControlName","email","readonly","",1,"text-body","pr-82"],[1,"input-icon-wrapper","ab",3,"click"],["svgType","edit"],[1,"input-icon-label"],["formControlName","password","placeholder","8 or more characters",1,"text-body","password",3,"type"],[1,"show-icon",3,"svgType","click"],[1,"buttons-wrapper"],[1,"primary-button","text-body",3,"disabled"],["class","button-loader",4,"ngIf"],[4,"ngIf"],[1,"button-loader"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4),e._uU(5),e.TgZ(6,"div",5)(7,"span"),e._uU(8),e.qZA(),e.TgZ(9,"span",6),e.NdJ("click",function(){return t.goToSignIn()}),e._uU(10),e.qZA()()()()(),e._UZ(11,"div",7),e.TgZ(12,"div",1)(13,"form",8),e.NdJ("ngSubmit",function(){return t.signUp()}),e.TgZ(14,"button",9),e.NdJ("click",function(){return t.signUpWithGoogle()}),e._UZ(15,"app-svg",10),e._uU(16),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"span",12),e.TgZ(19,"span",13),e._uU(20),e.qZA(),e._UZ(21,"span",12),e.qZA(),e.TgZ(22,"div",14)(23,"div",15)(24,"div",16),e._uU(25),e.qZA(),e.TgZ(26,"div",17),e._UZ(27,"input",18),e.qZA()(),e.TgZ(28,"div",15)(29,"div",16),e._uU(30),e.qZA(),e.TgZ(31,"div",19),e._UZ(32,"input",20),e.TgZ(33,"div",21),e.NdJ("click",function(){return t.goToSignInMail()}),e._UZ(34,"app-svg",22),e.TgZ(35,"div",23),e._uU(36),e.qZA()()()(),e.TgZ(37,"div",15)(38,"div",16),e._uU(39),e.qZA(),e.TgZ(40,"div",17),e._UZ(41,"input",24),e.TgZ(42,"app-svg",25),e.NdJ("click",function(){return t.onToggle()}),e.qZA()()()(),e.TgZ(43,"div",26)(44,"button",27),e.YNc(45,W,1,0,"app-loader",28),e.YNc(46,H,2,1,"span",29),e.qZA()()()()()),2&i&&(e.Q6J("ngClass",e.VKq(16,K,t.loading)),e.xp6(5),e.hij(" ","Sign up with email"," "),e.xp6(3),e.Oqu("Already have an account?"),e.xp6(2),e.Oqu("Sign in"),e.xp6(3),e.Q6J("formGroup",t.signUpForm),e.xp6(3),e.hij(" ","Sign up with Google"," "),e.xp6(4),e.Oqu("OR"),e.xp6(5),e.hij(" ","Name"," "),e.xp6(5),e.hij(" ","Email"," "),e.xp6(6),e.Oqu("Edit"),e.xp6(3),e.hij(" ","Password"," "),e.xp6(2),e.Q6J("type",t.inputType),e.xp6(1),e.Q6J("svgType",t.passwordIcon),e.xp6(2),e.Q6J("disabled",!t.signUpForm.valid||t.loading),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading))},dependencies:[s.mk,s.O5,o._Y,o.Fj,o.JJ,o.JL,f.H,w.R,o.sg,o.u,s.Zd]}),n})(),title:"Create your Tiles Account"},{path:"sign-in-google",component:S},{path:"password-reset",component:C,title:"Reset password - Tiles"},{path:"**",component:b.r,title:"Page not found - Tiles"}]}];let X=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(L),g.Bz]}),n})();var B=l(1469),z=l(5473);let $=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[z.a],imports:[s.ez,X,B.m,o.UX,T.OS,T.eQ]}),n})()}}]);