"use strict";(self.webpackChunktiled=self.webpackChunktiled||[]).push([[945],{1945:(he,v,a)=>{a.r(v),a.d(v,{PublicModule:()=>le});var p=a(6895),f=a(9051),M=a(5861),y=a(7579),e=a(4650),T=a(4195),U=a(131),S=a(8330),I=a(1443),w=a(1481),z=a(9004),D=a(4642),L=a(6449),Z=a(6307);const m=typeof performance<"u"&&typeof performance.now<"u"&&"function"==typeof performance.mark&&"function"==typeof performance.measure&&("function"==typeof performance.clearMarks||"function"==typeof performance.clearMeasures),J=typeof PerformanceObserver<"u"&&typeof PerformanceObserver.prototype<"u"&&"function"==typeof PerformanceObserver.prototype.constructor,_="[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0);let x={},h={};const b=()=>m?performance.now():Date.now(),k=i=>{x[i]=void 0,h[i]&&(h[i]=void 0),m&&(_||performance.clearMeasures(i),performance.clearMarks(i))},P=i=>{if(m){if(_&&J){const o=new PerformanceObserver(t=>{h[i]=t.getEntries().find(n=>n.name===i),o.disconnect()});o.observe({entryTypes:["measure"]})}performance.mark(i)}x[i]=b()},C=(i,o)=>{try{const t=x[i];return m?(o||performance.mark(`${i}-end`),performance.measure(i,i,o||`${i}-end`),_?h[i]?h[i]:t?{duration:b()-t,startTime:t,entryType:"measure",name:i}:{}:performance.getEntriesByName(i).pop()||{}):t?{duration:b()-t,startTime:t,entryType:"measure",name:i}:{}}catch{return{}}finally{k(i),k(o||`${i}-end`)}},W=function(i,o,t,n){return{circle:i,progress:o,"progress-dark":t,pulse:n}};function A(i,o){if(1&i&&e._UZ(0,"span",1),2&i){const t=e.oxw();e.Q6J("ngClass",e.l5B(4,W,"circle"===t.appearance,"progress"===t.animation,"progress-dark"===t.animation,"pulse"===t.animation))("ngStyle",t.theme),e.uIk("aria-label",t.ariaLabel)("aria-valuetext",t.loadingText)}}const O=new e.OlP("ngx-skeleton-loader.config");let N=(()=>{class i{constructor(t){const{appearance:n="line",animation:r="progress",theme:s=null,loadingText:d="Loading...",count:l=1,ariaLabel:u="loading"}=t||{};this.appearance=n,this.animation=r,this.theme=s,this.loadingText=d,this.count=l,this.items=[],this.ariaLabel=u}ngOnInit(){P("NgxSkeletonLoader:Rendered"),P("NgxSkeletonLoader:Loaded"),this.validateInputValues()}validateInputValues(){/^\d+$/.test(`${this.count}`)||((0,e.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'count' a numeric value. Forcing default to \"1\"."),this.count=1),this.items.length=this.count;const t=["progress","progress-dark","pulse","false"];-1===t.indexOf(String(this.animation))&&((0,e.X6Q)()&&console.error(`\`NgxSkeletonLoaderComponent\` need to receive 'animation' as: ${t.join(", ")}. Forcing default to "progress".`),this.animation="progress"),-1===["circle","line",""].indexOf(String(this.appearance))&&((0,e.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'appearance' as: circle or line or empty string. Forcing default to \"''\"."),this.appearance="")}ngOnChanges(t){["count","animation","appearance"].find(n=>t[n]&&(t[n].isFirstChange()||t[n].previousValue===t[n].currentValue))||this.validateInputValues()}ngAfterViewInit(){C("NgxSkeletonLoader:Rendered")}ngOnDestroy(){C("NgxSkeletonLoader:Loaded")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ngx-skeleton-loader"]],inputs:{count:"count",loadingText:"loadingText",appearance:"appearance",animation:"animation",ariaLabel:"ariaLabel",theme:"theme"},features:[e.TTD],decls:1,vars:1,consts:[["class","skeleton-loader","aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],["aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",1,"skeleton-loader",3,"ngClass","ngStyle"]],template:function(t,n){1&t&&e.YNc(0,A,1,9,"span",0),2&t&&e.Q6J("ngForOf",n.items)},dependencies:[p.sg,p.mk,p.PC],styles:['.skeleton-loader[_ngcontent-%COMP%]{box-sizing:border-box;overflow:hidden;position:relative;background:#eff1f6 no-repeat;border-radius:4px;width:100%;height:20px;display:inline-block;margin-bottom:10px;will-change:transform}.skeleton-loader[_ngcontent-%COMP%]:after, .skeleton-loader[_ngcontent-%COMP%]:before{box-sizing:border-box}.skeleton-loader.circle[_ngcontent-%COMP%]{width:40px;height:40px;margin:5px;border-radius:50%}.skeleton-loader.progress[_ngcontent-%COMP%], .skeleton-loader.progress-dark[_ngcontent-%COMP%]{transform:translate(0)}.skeleton-loader.progress[_ngcontent-%COMP%]:after, .skeleton-loader.progress[_ngcontent-%COMP%]:before, .skeleton-loader.progress-dark[_ngcontent-%COMP%]:after, .skeleton-loader.progress-dark[_ngcontent-%COMP%]:before{box-sizing:border-box}.skeleton-loader.progress[_ngcontent-%COMP%]:before, .skeleton-loader.progress-dark[_ngcontent-%COMP%]:before{-webkit-animation:progress 2s ease-in-out infinite;animation:progress 2s ease-in-out infinite;background-size:200px 100%;position:absolute;z-index:1;top:0;left:0;width:200px;height:100%;content:""}.skeleton-loader.progress[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,rgba(255,255,255,0),rgba(255,255,255,.6),rgba(255,255,255,0))}.skeleton-loader.progress-dark[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,transparent,rgba(0,0,0,.2),transparent)}.skeleton-loader.pulse[_ngcontent-%COMP%]{-webkit-animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;-webkit-animation-delay:.5s;animation-delay:.5s}@media (prefers-reduced-motion: reduce){.skeleton-loader.pulse[_ngcontent-%COMP%], .skeleton-loader.progress-dark[_ngcontent-%COMP%], .skeleton-loader.progress[_ngcontent-%COMP%]{-webkit-animation:none;animation:none}.skeleton-loader.progress[_ngcontent-%COMP%], .skeleton-loader.progress-dark[_ngcontent-%COMP%]{background-image:none}}@-webkit-keyframes progress{0%{transform:translate(-200px)}to{transform:translate(calc(200px + 100vw))}}@keyframes progress{0%{transform:translate(-200px)}to{transform:translate(calc(200px + 100vw))}}@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}'],changeDetection:0}),i})(),E=(()=>{class i{static forRoot(t){return{ngModule:i,providers:[{provide:O,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez]]}),i})(),Q=(()=>{class i{constructor(t){this.router=t}ngOnInit(){}goToLogin(){this.router.navigate(["auth"])}getLink(){localStorage.setItem("selectedUsername",this.userId),this.router.navigate(["auth"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["username-available"]],inputs:{userId:"userId"},decls:22,vars:2,consts:[[1,"page-wrapper"],[1,"hero"],[1,"navbar"],[1,"nav-container"],["href","#"],["src","assets\\images\\landing\\tiles-logo-nav.png","alt","Logo"],[1,"btn-login",3,"click"],[1,"circle"],[1,"hero-container"],[1,"hero-content"],[1,"user-available-header"],[1,"color-indicator"],[1,"user-link"],[1,"get-link-button","btn-cta",3,"click"],[1,"hero-image"],["src","assets\\images\\landing\\hero-bg-tab.png","alt","Hero background"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"nav",2)(3,"div",3)(4,"a",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.goToLogin()}),e._uU(7,"Log in"),e.qZA()()(),e._UZ(8,"div",7),e.TgZ(9,"div",8)(10,"div",9)(11,"div",10),e._UZ(12,"span",11),e._uU(13," This username is available "),e.qZA(),e.TgZ(14,"div",12)(15,"span"),e._uU(16,"tiles.bio/"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"button",13),e.NdJ("click",function(){return n.getLink()}),e._uU(19),e.qZA()(),e.TgZ(20,"div",14),e._UZ(21,"img",15),e.qZA()()()()),2&t&&(e.xp6(17),e.hij("",n.userId," "),e.xp6(2),e.hij(" ","Get this username now"," "))},styles:[".page-wrapper[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;height:100%;background-color:#000}.page-wrapper[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:72px;line-height:110%;font-weight:500;color:#f9f9f9}.page-wrapper[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:56px;line-height:120%;font-weight:500;color:#f9f9f9}.page-wrapper[_ngcontent-%COMP%]   .h3[_ngcontent-%COMP%]{font-size:24px;line-height:120%;font-weight:500;color:#f9f9f9}.page-wrapper[_ngcontent-%COMP%]   .body-text[_ngcontent-%COMP%]{font-size:24px;line-height:160%;font-weight:400;color:#f9f9f9cc}.page-wrapper[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{background-color:transparent}.page-wrapper[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:0 auto;max-width:1200px;height:auto;padding:24px 32px 0}.page-wrapper[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px}.page-wrapper[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background-image:url(/assets/images/landing/hero-bg.png);background-position:right bottom;background-size:85vh;background-repeat:no-repeat}.page-wrapper[_ngcontent-%COMP%]   .hero-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:0 auto;max-width:1200px;width:100%;height:100%;padding:0 32px}.page-wrapper[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:60%;gap:24px}.page-wrapper[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .user-available-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:8px 10px 8px 8px;column-gap:8px;background:linear-gradient(270deg,rgba(110,255,146,0) 0%,rgba(110,255,146,.15) 93.4%);border:1px solid rgba(255,255,255,.06);border-radius:100px;font-size:14px;font-weight:400;line-height:100%;color:#f9f9f999}.page-wrapper[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .user-available-header[_ngcontent-%COMP%]   .color-indicator[_ngcontent-%COMP%]{width:12px;height:12px;background:#6fff92;border-radius:100px}.page-wrapper[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .user-link[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:12px 16px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.06);border-radius:100px;font-weight:500;font-size:28px;line-height:120%;text-shadow:0px 0px 16px rgba(0,0,0,.5);margin-bottom:16px;color:#f9f9f9}.page-wrapper[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .user-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f9f9f999}.page-wrapper[_ngcontent-%COMP%]   .btn-cta[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;text-align:center;overflow:hidden;padding:16px 24px;gap:12px;background-image:linear-gradient(to right,#bd00ff 0%,#6100ff 51%,#bd00ff 100%);border-radius:150px;font-size:20px;line-height:120%;font-weight:500;color:#f9f9f9;cursor:pointer;transition:.5s;background-size:200% auto}.page-wrapper[_ngcontent-%COMP%]   .btn-cta[_ngcontent-%COMP%]:hover{background-position:right center}.page-wrapper[_ngcontent-%COMP%]   .btn-cta[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px}.page-wrapper[_ngcontent-%COMP%]   .hero-image[_ngcontent-%COMP%]{display:none}.page-wrapper[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{position:absolute;top:-75px;left:-75px;width:300px;height:300px;background-color:#82007c;opacity:.5;filter:blur(100px);border-radius:50%;z-index:0}.page-wrapper[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{font-size:16px;line-height:100%;font-weight:600;background-color:#ffffff0d;color:#ffffff80;border:none;border-radius:100px;padding:8px 12px;cursor:pointer;transition:background-color .2s ease-in-out}.page-wrapper[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}@media (max-width: 1024px){.page-wrapper[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:56px}.page-wrapper[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:48px}.page-wrapper[_ngcontent-%COMP%]   .h3[_ngcontent-%COMP%]{font-size:24px}.page-wrapper[_ngcontent-%COMP%]   .body-text[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 768px){.page-wrapper[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:56px}.page-wrapper[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:48px}.page-wrapper[_ngcontent-%COMP%]   .h3[_ngcontent-%COMP%]{font-size:24px}.page-wrapper[_ngcontent-%COMP%]   .body-text[_ngcontent-%COMP%]{font-size:20px}.page-wrapper[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{background-color:transparent}.page-wrapper[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]{padding:24px 0}.page-wrapper[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:auto;padding:0 32px;margin:auto;background-image:none}.page-wrapper[_ngcontent-%COMP%]   .hero-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:0 auto;max-width:768px;width:100%;height:100%;padding:0}.page-wrapper[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;gap:24px;padding-top:10vh}.page-wrapper[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.page-wrapper[_ngcontent-%COMP%]   .hero-image[_ngcontent-%COMP%]{display:flex;width:100%;padding-top:8vh}.page-wrapper[_ngcontent-%COMP%]   .hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;filter:drop-shadow(0px 0px 80px rgba(130,0,124,.25))}}@media (max-width: 430px){.page-wrapper[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:48px}.page-wrapper[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:40px}}"]}),i})();const Y=function(i){return{"background-color":"var(--cards-background)",height:i,"border-radius":"24px"}};function G(i,o){if(1&i&&e._UZ(0,"ngx-skeleton-loader",10),2&i){const t=e.oxw(2);e.Q6J("theme",e.VKq(1,Y,t.tileWidth+50+"px"))}}const F=function(){return{display:"flex",width:"100%","flex-wrap":"wrap",gap:"20px",padding:"10px"}},H=function(i,o){return{"background-color":"var(--cards-background)",height:i,width:o,"border-radius":"24px","margin-bottom":0}};function j(i,o){if(1&i&&e._UZ(0,"ngx-skeleton-loader",11),2&i){const t=e.oxw(2);e.Q6J("ngStyle",e.DdM(2,F))("theme",e.WLB(3,H,t.tileWidth-22+"px",t.tileWidth-22+"px"))}}function V(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.shareMyUrl())}),e._UZ(1,"app-svg",13),e.qZA()}}function B(i,o){if(1&i&&e._UZ(0,"header-tile",14),2&i){const t=e.oxw(2);e.Q6J("tileData",t.profileData)}}function R(i,o){if(1&i&&e._UZ(0,"app-gridstack",15,16),2&i){const t=e.oxw(2);e.Q6J("options",t.gridOptions)("tiles",t.tiles)("deviceType",t.deviceType)("isPublicPage",!0)}}function K(i,o){1&i&&e._UZ(0,"img",25)}function X(i,o){1&i&&e._UZ(0,"img",26)}function $(i,o){if(1&i&&e._UZ(0,"img",27),2&i){const t=e.oxw(3);e.Q6J("src",t.myAvatarUrl,e.LSH)}}function q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.goToEditor())}),e._uU(1),e.qZA()}2&i&&(e.xp6(1),e.hij(" ","Edit my Tiles"," "))}function ee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.goToSignIn())}),e._uU(1),e.qZA()}2&i&&(e.xp6(1),e.hij(" ","Create your Tiles"," "))}function te(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.goToMyProfile())}),e._uU(1),e.qZA()}2&i&&(e.xp6(1),e.hij(" ","My profile"," "))}function ie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.goToSignIn())}),e._uU(1),e.qZA()}2&i&&(e.xp6(1),e.Oqu("Sign in"))}function ne(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.signOut())}),e._uU(1),e.qZA()}2&i&&(e.xp6(1),e.Oqu("Sign out"))}function oe(i,o){if(1&i&&(e.TgZ(0,"div",17)(1,"div",18),e.YNc(2,K,1,0,"img",19),e.YNc(3,X,1,0,"img",20),e.YNc(4,$,1,1,"img",21),e.YNc(5,q,2,1,"span",22),e.YNc(6,ee,2,1,"span",22),e.YNc(7,te,2,1,"span",22),e.qZA(),e._UZ(8,"div",23),e.YNc(9,ie,2,1,"div",24),e.YNc(10,ne,2,1,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!(t.isLoggedIn&&!t.isSameUser)&&"light"===t.selectedTheme),e.xp6(1),e.Q6J("ngIf",!(t.isLoggedIn&&!t.isSameUser)&&"light"!==t.selectedTheme),e.xp6(1),e.Q6J("ngIf",t.isLoggedIn&&!t.isSameUser),e.xp6(1),e.Q6J("ngIf",t.isLoggedIn&&t.isSameUser),e.xp6(1),e.Q6J("ngIf",!t.isLoggedIn),e.xp6(1),e.Q6J("ngIf",t.isLoggedIn&&!t.isSameUser),e.xp6(2),e.Q6J("ngIf",!t.isLoggedIn),e.xp6(1),e.Q6J("ngIf",t.isLoggedIn)}}const re=function(i){return{"touch-device":i}};function ae(i,o){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,G,1,3,"ngx-skeleton-loader",4),e.YNc(2,j,1,6,"ngx-skeleton-loader",5),e.YNc(3,V,2,0,"div",6),e.YNc(4,B,1,1,"header-tile",7),e.YNc(5,R,2,4,"app-gridstack",8),e.YNc(6,oe,11,8,"div",9),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(7,re,t.isTouchDevice)),e.xp6(1),e.Q6J("ngIf",0!==t.loading),e.xp6(1),e.Q6J("ngIf",0!==t.loading),e.xp6(1),e.Q6J("ngIf",t.gridOptions),e.xp6(1),e.Q6J("ngIf",t.gridOptions),e.xp6(1),e.Q6J("ngIf",t.gridOptions),e.xp6(1),e.Q6J("ngIf",t.gridOptions)}}function se(i,o){if(1&i&&e._UZ(0,"username-available",30),2&i){const t=e.oxw();e.Q6J("userId",t.userId)}}function de(i,o){1&i&&e._UZ(0,"page-not-found")}const ce=[{path:"",component:(()=>{class i{constructor(t,n,r,s,d,l,u,c){this.themeService=t,this.supabaseService=n,this.router=r,this.route=s,this.dataCarrier=d,this.toastService=l,this.titleService=u,this.meta=c,this.tiles=[],this.tileItemOptions={mobile:[],desktop:[]},this.isAddTileActive=!1,this.deviceType="desktop",this.selectedView="desktop",this.isMobileViewSelected=!1,this.isHeaderSelected=!1,this.userNameAvailable=!0,this.pageNotFound=!1,this.ngUnsubscribe=new y.x,this.loading=0,this.isLoggedIn=!1,this.isSameUser=!1,this.selectedTheme="default",this.isTouchDevice=this.checkIsTouchDevice()}ngOnInit(){this.setTheme(),this.setDeviceTypes(),this.route.params.subscribe(t=>{this.userId=t.id.toLowerCase(),this.gridOptions=void 0,this.getUserTheme()})}ngAfterViewInit(){this.windowWidth=window.innerWidth}checkUserLoggedIn(){this.isLoggedIn=!1,this.isSameUser=!1,this.supabaseService.getSession().then(t=>{t.data.session&&(this.isLoggedIn=!0,this.getUserName(t.data.session.user.email))}).catch(t=>{})}getUserName(t){this.loading++,this.supabaseService.getMailDetails(t).catch(n=>{this.loading--,this.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}})}).then(n=>{this.loading--,n&&n.error?this.toastService.addToast({message:n.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}}):(this.myUserName=n[0].username,this.myAvatarUrl=n[0].avatar_url,this.myUserName===this.userId&&(this.isSameUser=!0))})}goToMyProfile(){this.router.navigate([this.myUserName])}goToSignIn(){this.router.navigate(["auth"])}goToEditor(){this.router.navigate(["editor"])}signOut(){this.loading++,this.supabaseService.signOut().then(t=>{this.loading--,this.checkUserLoggedIn()})}getUserTheme(){this.loading++,this.supabaseService.getUserTheme(this.userId).catch(t=>{this.loading--,this.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}})}).then(t=>{this.loading--,t&&t.error?this.toastService.addToast({message:t.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}}):(this.selectedTheme=t.data[0].selected_theme?t.data[0].selected_theme:"default",t.data[0].reserved_usernames.includes(this.userId)?this.pageNotFound=!0:t.data[0].selected_theme?(this.setTheme(),this.getUserData(),this.checkUserLoggedIn()):(this.titleService.setTitle("Username available - Tiles"),this.userNameAvailable=!1))})}getUserData(){this.loading++,this.supabaseService.getUserData(this.userId).catch(t=>{this.loading--,this.toastService.addToast({message:"Something went wrong",type:"error",additionalData:{error:new Error("Something went wrong")}})}).then(t=>{this.loading--,t&&t.error?this.toastService.addToast({message:t.error.message,type:"error",additionalData:{error:new Error("Something went wrong")}}):(this.tiles=t.data[0].tiles?t.data[0].tiles:[],this.tileItemOptions.mobile=t.data[0].mobile_layout?t.data[0].mobile_layout:[],this.tileItemOptions.desktop=t.data[0].desktop_layout?t.data[0].desktop_layout:[],this.profileData=t.data[0].profile_data?t.data[0].profile_data[0]:void 0,this.profileData&&(this.setTitleMetaTags(),this.dataCarrier.setProfileData(this.profileData)),this.setGridOptions(this.deviceType))})}setTitleMetaTags(){this.titleService.setTitle(this.profileData.full_name),this.meta.updateTag({property:"og:url",content:location.href}),this.meta.updateTag({property:"og:title",content:this.profileData.full_name}),this.meta.updateTag({property:"og:description",content:this.profileData.user_bio}),this.meta.updateTag({name:"twitter:url",content:location.href}),this.meta.updateTag({name:"twitter:title",content:this.profileData.full_name}),this.meta.updateTag({name:"twitter:description",content:this.profileData.user_bio})}setTheme(){"default"===this.selectedTheme?this.checkDefaultTheme():("dark"!==this.selectedTheme?this.themeService.setLightTheme():this.themeService.setDarkTheme(),this.dataCarrier.setThemChangeEvent(this.selectedTheme))}checkDefaultTheme(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(this.themeService.setDarkTheme(),this.dataCarrier.setThemChangeEvent("dark"),this.selectedTheme="dark"):(this.themeService.setLightTheme(),this.dataCarrier.setThemChangeEvent("light"),this.selectedTheme="light")}checkIsTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}setDeviceTypes(){this.selectedView="desktop",window.innerWidth<767.9?(this.deviceType="mobile",this.selectedView="mobile"):this.deviceType=window.innerWidth<1280?"tablet":"desktop",this.setTileWidth(this.deviceType)}setTileWidth(t,n){if("mobile"===t){const s=n||430,d=2;this.tileWidth=Math.round((window.innerWidth-16)/d),window.innerWidth>s?(this.tileWidth=(s-16)/d,document.documentElement.style.setProperty("--page-padding-side-phone",(window.innerWidth-(s-16))/2+"px")):document.documentElement.style.setProperty("--page-padding-side-phone","8px")}else"tablet"===t?(this.tileWidth=(window.innerWidth-20)/4,window.innerWidth>860?(this.tileWidth=210,document.documentElement.style.setProperty("--page-padding-side-tablet",(window.innerWidth-840)/2+"px")):document.documentElement.style.setProperty("--page-padding-side-tablet","10px")):(this.tileWidth=(window.innerWidth-60)/4,window.innerWidth>1280&&(this.tileWidth=305,document.documentElement.style.setProperty("--page-padding-side",(window.innerWidth-1220)/2+"px")))}setGridOptions(t){let n=4,r=91,s=10,d="desktop";"mobile"===t?(n=2,r=64,s=8,d="mobile"):"tablet"===t&&(r=64);let l=0,u=[];this.tileItemOptions[d].forEach(c=>{let g={};g.id=c.id,g.x=c.x_axis,g.y=Math.round(c.y_axis*this.tileWidth)+l,g.w=c.width,g.h=Math.round(c.height*this.tileWidth),g.type=c.type,g.tile_id=c.id,"group_title"===c.type&&(l+=r,g.h=r,g.w=n),u.push(g)}),this.gridOptions={cellHeight:1,margin:s,float:!1,column:n,disableOneColumnMode:!0,alwaysShowResizeHandle:!1,disableResize:!0,children:u},this.setTileSizes()}setTileSizes(){this.tileSizes=[],this.tileItemOptions[this.selectedView].forEach(t=>{this.tiles.find(l=>l.id==t.id).size="s"+t.width+"x"+t.height})}onResize(t){window.addEventListener("resize",n=>{window.innerWidth!=this.windowWidth&&(this.windowWidth=window.innerWidth,this.isMobileViewSelected?(this.setTileWidth("mobile",362),this.setGridOptions("mobile")):(this.setDeviceTypes(),this.setGridOptions(this.deviceType)),this.refreshGridStack())})}refreshGridStack(){let t=this.gridOptions;this.gridOptions=void 0,setTimeout(()=>{this.gridOptions=t})}shareMyUrl(){navigator.share?navigator.share({title:"",text:"View "+this.profileData.full_name+"'s tiles.\n",url:location.origin+"/"+this.profileData.username}).then().catch(t=>{}):this.copyUrl()}copyUrl(){var t=this;return(0,M.Z)(function*(){try{yield navigator.clipboard.writeText(location.origin+"/"+t.profileData.username),t.dataCarrier.setSnackBarData({message:"Link copied to clipboard",show:!0,bottom:"110px"})}catch{t.toastService.addToast({message:"Browser not supported. Please copy the url from your Profile page",type:"error",additionalData:{error:new Error("Something went wrong")}})}})()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.f),e.Y36(U.T),e.Y36(f.F0),e.Y36(f.gz),e.Y36(S.H),e.Y36(I.k),e.Y36(w.Dx),e.Y36(w.h_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-grid-test"]],hostBindings:function(t,n){1&t&&e.NdJ("resize",function(s){return n.onResize(s)},!1,e.Jf7)},decls:3,vars:3,consts:[["class","public-grid-container","id","gridContainer",3,"ngClass",4,"ngIf"],[3,"userId",4,"ngIf"],[4,"ngIf"],["id","gridContainer",1,"public-grid-container",3,"ngClass"],["style","width: 100%; padding: 10px;","count","1","appearance","line","animation","progress-dark",3,"theme",4,"ngIf"],["count","4","appearance","line","animation","progress-dark",3,"ngStyle","theme",4,"ngIf"],["class","header-share-icon",3,"click",4,"ngIf"],["class","header-outer",3,"tileData",4,"ngIf"],["class","gridstack-outer","id","cards",3,"options","tiles","deviceType","isPublicPage",4,"ngIf"],["class","footer",4,"ngIf"],["count","1","appearance","line","animation","progress-dark",2,"width","100%","padding","10px",3,"theme"],["count","4","appearance","line","animation","progress-dark",3,"ngStyle","theme"],[1,"header-share-icon",3,"click"],["svgType","share"],[1,"header-outer",3,"tileData"],["id","cards",1,"gridstack-outer",3,"options","tiles","deviceType","isPublicPage"],["gridComp",""],[1,"footer"],[1,"footer-logo"],["src","assets\\images\\logo\\logo-blkt.png","alt","Logo",4,"ngIf"],["src","assets\\images\\logo\\logo-darkbg.png","alt","Logo",4,"ngIf"],["class","avatar-image",3,"src",4,"ngIf"],[3,"click",4,"ngIf"],[1,"footer-separator"],["class","footer-options",3,"click",4,"ngIf"],["src","assets\\images\\logo\\logo-blkt.png","alt","Logo"],["src","assets\\images\\logo\\logo-darkbg.png","alt","Logo"],[1,"avatar-image",3,"src"],[3,"click"],[1,"footer-options",3,"click"],[3,"userId"]],template:function(t,n){1&t&&(e.YNc(0,ae,7,9,"div",0),e.YNc(1,se,1,1,"username-available",1),e.YNc(2,de,1,0,"page-not-found",2)),2&t&&(e.Q6J("ngIf",n.userNameAvailable),e.xp6(1),e.Q6J("ngIf",!n.userNameAvailable),e.xp6(1),e.Q6J("ngIf",n.pageNotFound))},dependencies:[p.mk,p.O5,p.PC,z.r,D.s,L.G,Z.H,N,Q],styles:['.public-grid-container{padding:64px var(--page-padding-side) 0;height:100%;overflow-y:auto;scroll-behavior:auto;position:relative;overflow-x:hidden;display:flex;flex-direction:column;align-items:center}  .public-grid-container .header-outer{width:100%}  .public-grid-container .gridstack-outer{flex:1;width:100%}  .public-grid-container .footer{display:flex;margin:24px calc(0px - var(--page-padding-side)) 0;flex-direction:row;align-items:center;padding:40px 0;column-gap:16px;max-width:1200px;width:100%;border-top:var(--footer-border);color:var(--font-tertiary);font-weight:500;font-size:14px;line-height:120%}  .public-grid-container .footer .footer-logo{display:flex;flex-direction:row;align-items:center;padding:0;gap:4px;cursor:pointer}  .public-grid-container .footer .footer-logo .avatar-image{border-radius:50%;object-fit:cover}  .public-grid-container .footer .footer-logo img{width:20px;height:20px}  .public-grid-container .footer .footer-separator{border-left:var(--seperator-border);height:18px}  .public-grid-container .footer .footer-options{cursor:pointer}@media (max-width: 1279px){  .public-grid-container .footer{margin:24px calc(0px - var(--page-padding-side-tablet)) 0}}@media (max-width: 767.9px){  .public-grid-container .footer{justify-content:center;padding:24px 16px;gap:16px;margin:24px calc(0px - var(--page-padding-side-phone)) 0}  .public-grid-container .footer .footer-logo img{width:18px;height:18px}}  .public-grid-container .floating-bar{display:none;z-index:2}  .public-grid-container::-webkit-scrollbar{width:0px}  .public-grid-container.touch-device .grid-stack-item .grid-stack-item-content{pointer-events:none}  .public-grid-container.touch-device .grid-stack-item.tile-active .grid-stack-item-content{pointer-events:all}  .public-grid-container header-tile.active .header-wrapper{box-shadow:var(--active-tile-shadow);border:var(--active-cards-border)}  .public-grid-container header-tile.active .header-wrapper .header-content-wrapper{border:0}  .public-grid-container .header-floating-bar{position:absolute;transform:translate(-50%);left:50%;z-index:1;top:auto;padding:16px;background:rgba(0,0,0,.8);border:1px solid rgba(255,255,255,.06);box-shadow:0 4px 8px #10101040;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:24px;margin-bottom:24px;color:#f9f9f9}  .public-grid-container .header-floating-bar .header-options{display:flex;flex-direction:row;column-gap:8px;flex:1;background:rgba(255,255,255,.15);border-radius:8px;padding:7px 12px 7px 8px;align-items:center;justify-content:center;cursor:pointer;font-weight:500}  .public-grid-container .header-floating-bar .header-options .bottom-option-icon svg{width:22px;height:22px}  .public-grid-container .header-floating-bar .header-options .bottom-option-label{font-size:14px;line-height:17px}  .public-grid-container .header-floating-bar .header-options:hover{background:rgba(255,255,255,.3)}  .public-grid-container .header-share-icon{position:absolute;top:96px;right:calc(var(--page-padding-side) + 42px);z-index:10;border-radius:50%;background:rgba(36,41,46,.4);padding:4px;cursor:pointer}  .public-grid-container .header-share-icon:hover{background:rgba(36,41,46,.8)}@media (max-width: 1279px){  .public-grid-container .header-share-icon{top:68px;right:calc(var(--page-padding-side-tablet) + 38px)}  .public-grid-container .header-share-icon svg{width:28px;height:28px}}@media (max-width: 767.9px){  .public-grid-container .header-share-icon{top:48px;right:calc(var(--page-padding-side-phone) + 32px)}  .public-grid-container .header-share-icon svg{width:24px;height:24px}}.bottom-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;z-index:100;transform:translate(-50%)}.add-tile[_ngcontent-%COMP%]{position:absolute;display:flex;right:0;top:0;bottom:0;z-index:101;height:100%;justify-content:flex-end}.add-tile-backdrop[_ngcontent-%COMP%]{position:absolute;display:flex;right:0;top:0;bottom:0;z-index:101;height:100%;background:rgba(21,21,21,.2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);width:100%}@media (max-width: 1279px){.public-grid-container[_ngcontent-%COMP%]{padding:40px var(--page-padding-side-tablet) 0}}@media (max-width: 767.9px){.public-grid-container[_ngcontent-%COMP%]{padding:24px var(--page-padding-side-phone) 0}.bottom-bar[_ngcontent-%COMP%]{width:100%;left:0;transform:translate(0)}.add-tile[_ngcontent-%COMP%]{width:100%;left:0;top:auto;right:auto;max-height:90%;height:auto}}  .public-grid-container.mobile .h1{font-size:24px;line-height:34px}  .public-grid-container.mobile .h2{font-size:20px;line-height:32px}  .public-grid-container.mobile .h3{font-size:18px;line-height:22px}  .public-grid-container.mobile .h4{font-size:16px;line-height:22px}  .public-grid-container.mobile .text-body{font-size:16px;line-height:26px}  .public-grid-container.mobile .text-caption{font-size:14px;line-height:17px}  .grid-stack-placeholder>.placeholder-content{border-radius:32px!important;inset:0!important;background-color:var(--cards-placeholder)!important;z-index:0}@media (max-width: 1279px){  .grid-stack-placeholder>.placeholder-content{border-radius:24px!important}}  .grid-stack .grid-stack-item{border-radius:32px;border:9px solid transparent}  .grid-stack .grid-stack-item.url-tiles .grid-stack-item-content{cursor:pointer}  .grid-stack .grid-stack-item.group_title .grid-stack-item-content{inset:0!important;background-color:var(--background-primary);border:none!important}  .grid-stack .grid-stack-item .grid-stack-item-content{border-radius:32px;overflow-y:hidden;inset:0!important;z-index:1}@media (max-width: 1279px){  .grid-stack .grid-stack-item{border-radius:24px}  .grid-stack .grid-stack-item .grid-stack-item-content{border-radius:24px;overflow-y:hidden}}  .grid-stack .grid-stack-item[gs-w="1"]{width:25%;min-width:25%}  .grid-stack .grid-stack-item[gs-w="2"]{width:50%;min-width:50%}  .grid-stack .grid-stack-item[gs-w="3"]{width:75%;min-width:75%}  .grid-stack .grid-stack-item[gs-w="4"]{width:100%;min-width:100%}  .grid-stack .grid-stack-item[gs-x="1"]{left:25%}  .grid-stack .grid-stack-item[gs-x="2"]{left:50%}  .grid-stack .grid-stack-item[gs-x="3"]{left:75%}  .grid-stack .grid-stack-item[gs-x="4"]{left:100%}@media (max-width: 767.9px){  .grid-stack .grid-stack-item{border:7px solid transparent}  .grid-stack .grid-stack-item[gs-w="2"]{width:100%;min-width:100%}  .grid-stack .grid-stack-item[gs-w="1"]{width:50%;min-width:50%}  .grid-stack .grid-stack-item[gs-x="2"]{left:100%}  .grid-stack .grid-stack-item[gs-x="1"]{left:50%}}.btn[_ngcontent-%COMP%]{color:var(--font-primary)}']}),i})()}];let ge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.Bz.forChild(ce),f.Bz]}),i})();var pe=a(1469);let le=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,ge,pe.m,E]}),i})()}}]);